import datetime, json, logging, sys
import requests

logging.basicConfig(level=logging.DEBUG)

API_KEY = "915pw2pnf4h1aiguhph5gc5b2"  # same for everyone on mobile
#API_KEY = "d306zoyjsyarp7ifhu67rjxn52tv0t20"  # same for everyone on desktop

LISTING_IDS = {
    1: 5196399,
    2: 5253439,
    3: 5299538,
    4: 5299461,
    5: 8763366,
    6: 8763529,
    7: 8763407,
    8: 8763620
}


class AirbnbAPI:
    def __init__(self, username, password):
        self._session = requests.Session()

        self._session.headers = {
            "Accept": "application/json",
            "Accept-Encoding": "gzip, deflate",
            "Content-Type": "application/json",
            "X-Airbnb-API-Key": API_KEY,
            "User-Agent": "Airbnb/16.02 iPhone/9.2.1 Type/Phone"
        }

        login_payload = {"username": username,
                         "password": password,
                         "prevent_account_creation": "true"}

        r = self._session.post(
            "https://api.airbnb.com/v1/authorize", data=json.dumps(login_payload)
        )

        if "access_token" not in r.json():
            raise Exception("Error logging in: %s" % r.json())
        r.raise_for_status()

        self._access_token = r.json()["access_token"]

        self._session.headers.update({
            "X-Airbnb-OAuth-Token": self._access_token
        })

        r = self._session.get("https://api.airbnb.com/v1/account/active")
        r.raise_for_status()

        self.uid = r.json()["user"]["user"]["id"]

    def get_profile(self):
        r = self._session.get("https://api.airbnb.com/v1/users/%s" % self.uid)
        r.raise_for_status()

        return r.json()

    def get_calendar(self, listing_key):
        url = "https://api.airbnb.com/v2/calendars/" + \
            "{listing_id}/{start_date}/{end_date}?_format=host_calendar".format(
                listing_id=LISTING_IDS[listing_key],
                start_date=datetime.date.today(),
                end_date=datetime.date.today() + datetime.timedelta(days=7*4)
            )
        r = self._session.get(url)
        r.raise_for_status()
        return r.json()['calendar']['days']

    def get_reservations(self, listing_key):
        days = self.get_calendar(listing_key)
        resos = {}
        for day in days:
            if not day["reservation"]: continue
            date = datetime.datetime.strptime(day["date"], "%Y-%m-%d")
            res_id = day["reservation"]["confirmation_code"]
            if res_id not in resos:
                start_date = datetime.datetime.strptime(day["reservation"]["start_date"], "%Y-%m-%d")
                resos[res_id] = {
                    "guest": day["reservation"]["guest"],
                    "start_date": start_date,
                    "end_date": start_date + datetime.timedelta(days=day["reservation"]["nights"]),
                }
        return resos

if __name__ == '__main__':
    airbnb = AirbnbAPI(########USERPASSHERE
    resos = airbnb.get_reservations(4)
    #days = [{'available': False, 'type': 'reservation', 'date': '2016-01-26', 'external_calendar': None, 'group_id': 'reservation:130242203', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-01-26', 'guest_checkin_at': None, 'nights': 2, 'guest': {'picture_url': 'https://a2.muscache.com/ac/pictures/2d9b7fef-270d-4413-a119-beda56663f9d.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Düsseldorf, Germany', 'first_name': 'Bo', 'full_name': 'Bo Zimmerman', 'id': 55588383, 'thumbnail_url': 'https://a2.muscache.com/ac/pictures/2d9b7fef-270d-4413-a119-beda56663f9d.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': '85WE8D', 'number_of_guests': 1, 'localized_payout_price': 95, 'formatted_host_base_price': '$98'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [22, 36, 43, 50], 'date': '2016-01-26', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 36, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-01-27', 'external_calendar': None, 'group_id': 'reservation:130242203', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-01-26', 'guest_checkin_at': None, 'nights': 2, 'guest': {'picture_url': 'https://a2.muscache.com/ac/pictures/2d9b7fef-270d-4413-a119-beda56663f9d.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Düsseldorf, Germany', 'first_name': 'Bo', 'full_name': 'Bo Zimmerman', 'id': 55588383, 'thumbnail_url': 'https://a2.muscache.com/ac/pictures/2d9b7fef-270d-4413-a119-beda56663f9d.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': '85WE8D', 'number_of_guests': 1, 'localized_payout_price': 95, 'formatted_host_base_price': '$98'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [22, 37, 44, 52], 'date': '2016-01-27', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 37, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-01-28', 'external_calendar': None, 'group_id': 'reservation:128646323', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-01-28', 'guest_checkin_at': None, 'nights': 2, 'guest': {'picture_url': 'https://a1.muscache.com/ac/users/44693360/profile_pic/1442787708/original.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Toronto, Canada', 'first_name': 'Cameron', 'full_name': 'Cameron Lee', 'id': 44693360, 'thumbnail_url': 'https://a1.muscache.com/ac/users/44693360/profile_pic/1442787708/original.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': 'FMADSA', 'number_of_guests': 1, 'localized_payout_price': 95, 'formatted_host_base_price': '$98'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [22, 37, 44, 52], 'date': '2016-01-28', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 37, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-01-29', 'external_calendar': None, 'group_id': 'reservation:128646323', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-01-28', 'guest_checkin_at': None, 'nights': 2, 'guest': {'picture_url': 'https://a1.muscache.com/ac/users/44693360/profile_pic/1442787708/original.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Toronto, Canada', 'first_name': 'Cameron', 'full_name': 'Cameron Lee', 'id': 44693360, 'thumbnail_url': 'https://a1.muscache.com/ac/users/44693360/profile_pic/1442787708/original.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': 'FMADSA', 'number_of_guests': 1, 'localized_payout_price': 95, 'formatted_host_base_price': '$98'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [22, 37, 44, 52], 'date': '2016-01-29', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 37, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-01-30', 'external_calendar': None, 'group_id': 'reservation:130426863', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-01-30', 'guest_checkin_at': None, 'nights': 2, 'guest': {'picture_url': 'https://a0.muscache.com/ac/users/42701105/profile_pic/1440971438/original.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Solana Beach, CA', 'first_name': 'Camila', 'full_name': 'Camila Solari', 'id': 42701105, 'thumbnail_url': 'https://a0.muscache.com/ac/users/42701105/profile_pic/1440971438/original.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': '5BKRQD', 'number_of_guests': 1, 'localized_payout_price': 95, 'formatted_host_base_price': '$98'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [23, 38, 46, 53], 'date': '2016-01-30', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 38, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-01-31', 'external_calendar': None, 'group_id': 'reservation:130426863', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-01-30', 'guest_checkin_at': None, 'nights': 2, 'guest': {'picture_url': 'https://a0.muscache.com/ac/users/42701105/profile_pic/1440971438/original.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Solana Beach, CA', 'first_name': 'Camila', 'full_name': 'Camila Solari', 'id': 42701105, 'thumbnail_url': 'https://a0.muscache.com/ac/users/42701105/profile_pic/1440971438/original.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': '5BKRQD', 'number_of_guests': 1, 'localized_payout_price': 95, 'formatted_host_base_price': '$98'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [23, 38, 46, 53], 'date': '2016-01-31', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 38, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-02-01', 'external_calendar': None, 'group_id': 'reservation:130861549', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-02-01', 'guest_checkin_at': None, 'nights': 2, 'guest': {'picture_url': 'https://a2.muscache.com/ac/pictures/4a0870ad-fedd-4846-8f23-8ed2e6834a94.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Los Angeles, CA', 'first_name': 'Austin', 'full_name': 'Austin Messervy', 'id': 18353592, 'thumbnail_url': 'https://a2.muscache.com/ac/pictures/4a0870ad-fedd-4846-8f23-8ed2e6834a94.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': '2YPN25', 'number_of_guests': 1, 'localized_payout_price': 95, 'formatted_host_base_price': '$98'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [23, 39, 47, 55], 'date': '2016-02-01', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 39, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-02-02', 'external_calendar': None, 'group_id': 'reservation:130861549', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-02-01', 'guest_checkin_at': None, 'nights': 2, 'guest': {'picture_url': 'https://a2.muscache.com/ac/pictures/4a0870ad-fedd-4846-8f23-8ed2e6834a94.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Los Angeles, CA', 'first_name': 'Austin', 'full_name': 'Austin Messervy', 'id': 18353592, 'thumbnail_url': 'https://a2.muscache.com/ac/pictures/4a0870ad-fedd-4846-8f23-8ed2e6834a94.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': '2YPN25', 'number_of_guests': 1, 'localized_payout_price': 95, 'formatted_host_base_price': '$98'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [23, 39, 47, 55], 'date': '2016-02-02', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 39, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-02-03', 'external_calendar': None, 'group_id': 'reservation:118476680', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-02-03', 'guest_checkin_at': None, 'nights': 3, 'guest': {'picture_url': 'https://a2.muscache.com/ac/pictures/8d088bca-bd1d-4e70-a476-8455ebaf6a91.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Tianjin, China', 'first_name': 'Qing', 'full_name': 'Qing Hao', 'id': 49466648, 'thumbnail_url': 'https://a2.muscache.com/ac/pictures/8d088bca-bd1d-4e70-a476-8455ebaf6a91.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': 'WCAPAB', 'number_of_guests': 1, 'localized_payout_price': 143, 'formatted_host_base_price': '$147'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [24, 40, 48, 56], 'date': '2016-02-03', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 40, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-02-04', 'external_calendar': None, 'group_id': 'reservation:118476680', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-02-03', 'guest_checkin_at': None, 'nights': 3, 'guest': {'picture_url': 'https://a2.muscache.com/ac/pictures/8d088bca-bd1d-4e70-a476-8455ebaf6a91.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Tianjin, China', 'first_name': 'Qing', 'full_name': 'Qing Hao', 'id': 49466648, 'thumbnail_url': 'https://a2.muscache.com/ac/pictures/8d088bca-bd1d-4e70-a476-8455ebaf6a91.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': 'WCAPAB', 'number_of_guests': 1, 'localized_payout_price': 143, 'formatted_host_base_price': '$147'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [25, 41, 49, 57], 'date': '2016-02-04', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 41, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-02-05', 'external_calendar': None, 'group_id': 'reservation:118476680', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-02-03', 'guest_checkin_at': None, 'nights': 3, 'guest': {'picture_url': 'https://a2.muscache.com/ac/pictures/8d088bca-bd1d-4e70-a476-8455ebaf6a91.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Tianjin, China', 'first_name': 'Qing', 'full_name': 'Qing Hao', 'id': 49466648, 'thumbnail_url': 'https://a2.muscache.com/ac/pictures/8d088bca-bd1d-4e70-a476-8455ebaf6a91.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': 'WCAPAB', 'number_of_guests': 1, 'localized_payout_price': 143, 'formatted_host_base_price': '$147'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [25, 42, 50, 59], 'date': '2016-02-05', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 42, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-02-06', 'external_calendar': None, 'group_id': 'reservation:120768592', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-02-06', 'guest_checkin_at': None, 'nights': 4, 'guest': {'picture_url': 'https://a2.muscache.com/ac/pictures/385b869d-bb6e-4443-ae2a-31c4d373a4e9.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Mainz, Germany', 'first_name': 'Alexander', 'full_name': 'Alexander Schaaf', 'id': 50581528, 'thumbnail_url': 'https://a2.muscache.com/ac/pictures/385b869d-bb6e-4443-ae2a-31c4d373a4e9.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': '8Q4CBX', 'number_of_guests': 1, 'localized_payout_price': 190, 'formatted_host_base_price': '$196'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [26, 44, 53, 62], 'date': '2016-02-06', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 44, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-02-07', 'external_calendar': None, 'group_id': 'reservation:120768592', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-02-06', 'guest_checkin_at': None, 'nights': 4, 'guest': {'picture_url': 'https://a2.muscache.com/ac/pictures/385b869d-bb6e-4443-ae2a-31c4d373a4e9.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Mainz, Germany', 'first_name': 'Alexander', 'full_name': 'Alexander Schaaf', 'id': 50581528, 'thumbnail_url': 'https://a2.muscache.com/ac/pictures/385b869d-bb6e-4443-ae2a-31c4d373a4e9.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': '8Q4CBX', 'number_of_guests': 1, 'localized_payout_price': 190, 'formatted_host_base_price': '$196'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [26, 43, 52, 60], 'date': '2016-02-07', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 43, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-02-08', 'external_calendar': None, 'group_id': 'reservation:120768592', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-02-06', 'guest_checkin_at': None, 'nights': 4, 'guest': {'picture_url': 'https://a2.muscache.com/ac/pictures/385b869d-bb6e-4443-ae2a-31c4d373a4e9.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Mainz, Germany', 'first_name': 'Alexander', 'full_name': 'Alexander Schaaf', 'id': 50581528, 'thumbnail_url': 'https://a2.muscache.com/ac/pictures/385b869d-bb6e-4443-ae2a-31c4d373a4e9.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': '8Q4CBX', 'number_of_guests': 1, 'localized_payout_price': 190, 'formatted_host_base_price': '$196'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [24, 40, 48, 56], 'date': '2016-02-08', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 40, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-02-09', 'external_calendar': None, 'group_id': 'reservation:120768592', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-02-06', 'guest_checkin_at': None, 'nights': 4, 'guest': {'picture_url': 'https://a2.muscache.com/ac/pictures/385b869d-bb6e-4443-ae2a-31c4d373a4e9.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Mainz, Germany', 'first_name': 'Alexander', 'full_name': 'Alexander Schaaf', 'id': 50581528, 'thumbnail_url': 'https://a2.muscache.com/ac/pictures/385b869d-bb6e-4443-ae2a-31c4d373a4e9.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': '8Q4CBX', 'number_of_guests': 1, 'localized_payout_price': 190, 'formatted_host_base_price': '$196'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [24, 40, 48, 56], 'date': '2016-02-09', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 40, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-02-10', 'external_calendar': None, 'group_id': 'reservation:130021930', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-02-10', 'guest_checkin_at': None, 'nights': 3, 'guest': {'picture_url': 'https://a2.muscache.com/ac/pictures/f41e923b-48d3-44f1-ab05-4f5f6cefbde7.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Victoria, Australia', 'first_name': 'Michael', 'full_name': 'Michael Nikou', 'id': 55512714, 'thumbnail_url': 'https://a2.muscache.com/ac/pictures/f41e923b-48d3-44f1-ab05-4f5f6cefbde7.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': '4KPTSQ', 'number_of_guests': 1, 'localized_payout_price': 143, 'formatted_host_base_price': '$147'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [25, 42, 50, 59], 'date': '2016-02-10', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 42, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-02-11', 'external_calendar': None, 'group_id': 'reservation:130021930', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-02-10', 'guest_checkin_at': None, 'nights': 3, 'guest': {'picture_url': 'https://a2.muscache.com/ac/pictures/f41e923b-48d3-44f1-ab05-4f5f6cefbde7.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Victoria, Australia', 'first_name': 'Michael', 'full_name': 'Michael Nikou', 'id': 55512714, 'thumbnail_url': 'https://a2.muscache.com/ac/pictures/f41e923b-48d3-44f1-ab05-4f5f6cefbde7.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': '4KPTSQ', 'number_of_guests': 1, 'localized_payout_price': 143, 'formatted_host_base_price': '$147'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [26, 44, 53, 62], 'date': '2016-02-11', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 44, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-02-12', 'external_calendar': None, 'group_id': 'reservation:130021930', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-02-10', 'guest_checkin_at': None, 'nights': 3, 'guest': {'picture_url': 'https://a2.muscache.com/ac/pictures/f41e923b-48d3-44f1-ab05-4f5f6cefbde7.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Victoria, Australia', 'first_name': 'Michael', 'full_name': 'Michael Nikou', 'id': 55512714, 'thumbnail_url': 'https://a2.muscache.com/ac/pictures/f41e923b-48d3-44f1-ab05-4f5f6cefbde7.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': '4KPTSQ', 'number_of_guests': 1, 'localized_payout_price': 143, 'formatted_host_base_price': '$147'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [28, 46, 55, 64], 'date': '2016-02-12', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 46, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-02-13', 'external_calendar': None, 'group_id': 'reservation:124686766', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-02-13', 'guest_checkin_at': None, 'nights': 7, 'guest': {'picture_url': 'https://a2.muscache.com/ac/pictures/f3189fb3-506c-4b34-a44f-44b58ec052e4.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Copenhagen, Denmark', 'first_name': 'Signe', 'full_name': 'Signe Kiil', 'id': 4741565, 'thumbnail_url': 'https://a2.muscache.com/ac/pictures/f3189fb3-506c-4b34-a44f-44b58ec052e4.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': 'CDP9WS', 'number_of_guests': 1, 'localized_payout_price': 333, 'formatted_host_base_price': '$343'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [26, 43, 52, 60], 'date': '2016-02-13', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 43, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-02-14', 'external_calendar': None, 'group_id': 'reservation:124686766', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-02-13', 'guest_checkin_at': None, 'nights': 7, 'guest': {'picture_url': 'https://a2.muscache.com/ac/pictures/f3189fb3-506c-4b34-a44f-44b58ec052e4.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Copenhagen, Denmark', 'first_name': 'Signe', 'full_name': 'Signe Kiil', 'id': 4741565, 'thumbnail_url': 'https://a2.muscache.com/ac/pictures/f3189fb3-506c-4b34-a44f-44b58ec052e4.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': 'CDP9WS', 'number_of_guests': 1, 'localized_payout_price': 333, 'formatted_host_base_price': '$343'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [25, 42, 50, 59], 'date': '2016-02-14', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 42, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-02-15', 'external_calendar': None, 'group_id': 'reservation:124686766', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-02-13', 'guest_checkin_at': None, 'nights': 7, 'guest': {'picture_url': 'https://a2.muscache.com/ac/pictures/f3189fb3-506c-4b34-a44f-44b58ec052e4.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Copenhagen, Denmark', 'first_name': 'Signe', 'full_name': 'Signe Kiil', 'id': 4741565, 'thumbnail_url': 'https://a2.muscache.com/ac/pictures/f3189fb3-506c-4b34-a44f-44b58ec052e4.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': 'CDP9WS', 'number_of_guests': 1, 'localized_payout_price': 333, 'formatted_host_base_price': '$343'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [25, 42, 50, 59], 'date': '2016-02-15', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 42, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-02-16', 'external_calendar': None, 'group_id': 'reservation:124686766', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-02-13', 'guest_checkin_at': None, 'nights': 7, 'guest': {'picture_url': 'https://a2.muscache.com/ac/pictures/f3189fb3-506c-4b34-a44f-44b58ec052e4.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Copenhagen, Denmark', 'first_name': 'Signe', 'full_name': 'Signe Kiil', 'id': 4741565, 'thumbnail_url': 'https://a2.muscache.com/ac/pictures/f3189fb3-506c-4b34-a44f-44b58ec052e4.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': 'CDP9WS', 'number_of_guests': 1, 'localized_payout_price': 333, 'formatted_host_base_price': '$343'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [25, 42, 50, 59], 'date': '2016-02-16', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 42, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-02-17', 'external_calendar': None, 'group_id': 'reservation:124686766', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-02-13', 'guest_checkin_at': None, 'nights': 7, 'guest': {'picture_url': 'https://a2.muscache.com/ac/pictures/f3189fb3-506c-4b34-a44f-44b58ec052e4.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Copenhagen, Denmark', 'first_name': 'Signe', 'full_name': 'Signe Kiil', 'id': 4741565, 'thumbnail_url': 'https://a2.muscache.com/ac/pictures/f3189fb3-506c-4b34-a44f-44b58ec052e4.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': 'CDP9WS', 'number_of_guests': 1, 'localized_payout_price': 333, 'formatted_host_base_price': '$343'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [25, 42, 50, 59], 'date': '2016-02-17', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 42, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-02-18', 'external_calendar': None, 'group_id': 'reservation:124686766', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-02-13', 'guest_checkin_at': None, 'nights': 7, 'guest': {'picture_url': 'https://a2.muscache.com/ac/pictures/f3189fb3-506c-4b34-a44f-44b58ec052e4.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Copenhagen, Denmark', 'first_name': 'Signe', 'full_name': 'Signe Kiil', 'id': 4741565, 'thumbnail_url': 'https://a2.muscache.com/ac/pictures/f3189fb3-506c-4b34-a44f-44b58ec052e4.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': 'CDP9WS', 'number_of_guests': 1, 'localized_payout_price': 333, 'formatted_host_base_price': '$343'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [26, 43, 52, 60], 'date': '2016-02-18', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 43, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': False, 'type': 'reservation', 'date': '2016-02-19', 'external_calendar': None, 'group_id': 'reservation:124686766', 'notes': None, 'subtype': None, 'reservation': {'start_date': '2016-02-13', 'guest_checkin_at': None, 'nights': 7, 'guest': {'picture_url': 'https://a2.muscache.com/ac/pictures/f3189fb3-506c-4b34-a44f-44b58ec052e4.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=225:*&output-format=jpg&output-quality=70', 'location': 'Copenhagen, Denmark', 'first_name': 'Signe', 'full_name': 'Signe Kiil', 'id': 4741565, 'thumbnail_url': 'https://a2.muscache.com/ac/pictures/f3189fb3-506c-4b34-a44f-44b58ec052e4.jpg?interpolation=lanczos-none&crop=w:w;*,*&crop=h:h;*,*&resize=50:*&output-format=jpg&output-quality=70'}, 'status': 'accepted', 'confirmation_code': 'CDP9WS', 'number_of_guests': 1, 'localized_payout_price': 333, 'formatted_host_base_price': '$343'}, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [28, 47, 56, 66], 'date': '2016-02-19', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 47, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': True, 'type': 'available', 'date': '2016-02-20', 'external_calendar': None, 'group_id': None, 'notes': None, 'subtype': None, 'reservation': None, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [28, 46, 55, 64], 'date': '2016-02-20', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 46, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': True, 'type': 'available', 'date': '2016-02-21', 'external_calendar': None, 'group_id': None, 'notes': None, 'subtype': None, 'reservation': None, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [28, 47, 56, 66], 'date': '2016-02-21', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 47, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': True, 'type': 'available', 'date': '2016-02-22', 'external_calendar': None, 'group_id': None, 'notes': None, 'subtype': None, 'reservation': None, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [28, 47, 56, 66], 'date': '2016-02-22', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 47, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}, {'available': True, 'type': 'available', 'date': '2016-02-23', 'external_calendar': None, 'group_id': None, 'notes': None, 'subtype': None, 'reservation': None, 'price': {'demand_based_pricing_overridden': False, 'native_suggested_price_levels': [29, 49, 59, 69], 'date': '2016-02-23', 'local_price': 49, 'type': 'default', 'is_last_dynamic_pricing_day': False, 'native_price': 49.0, 'native_suggested_price': 49, 'local_currency': 'USD', 'native_currency': 'USD', 'native_demand_based_price': 111}, 'reason': None}]

    import pdb; pdb.set_trace()
